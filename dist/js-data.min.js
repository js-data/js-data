/**
* @author Jason Dobry <jason.dobry@gmail.com>
* @file js-data.min.js
* @version 0.0.1 - Homepage <http://js-data.io/>
* @copyright (c) 2014 Jason Dobry
* @license MIT <https://github.com/js-data/js-data/blob/master/LICENSE>
*
* @overview Data store.
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.JSData=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(require,module,exports){!function(global){"use strict";function detectObjectObserve(){function a(a){b=a}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var b=[],c={},d=[];return Object.observe(c,a),Array.observe(d,a),c.id=1,c.id=2,delete c.id,d.push(1,2),d.length=0,Object.deliverChangeRecords(a),5!==b.length?!1:"add"!=b[0].type||"update"!=b[1].type||"delete"!=b[2].type||"splice"!=b[3].type||"splice"!=b[4].type?!1:(Object.unobserve(c,a),Array.unobserve(d,a),!0)}function detectEval(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;try{var a=new Function("","return true;");return a()}catch(b){return!1}}function dirtyCheck(a){for(var b=0;MAX_DIRTY_CHECK_CYCLES>b&&a.check_();)b++;return global.testingExposeCycleCount&&(global.dirtyCheckCycleCount=b),b>0}function objectIsEmpty(a){for(var b in a)return!1;return!0}function diffIsEmpty(a){return objectIsEmpty(a.added)&&objectIsEmpty(a.removed)&&objectIsEmpty(a.changed)}function diffObjectFromOldObject(a,b){var c={},d={},e={};for(var f in b){var g=a[f];(void 0===g||g!==b[f])&&(f in a?g!==b[f]&&(e[f]=g):d[f]=void 0)}for(var f in a)f in b||(c[f]=a[f]);return Array.isArray(a)&&a.length!==b.length&&(e.length=a.length),{added:c,removed:d,changed:e}}function runEOMTasks(){if(!eomTasks.length)return!1;for(var a=0;a<eomTasks.length;a++)eomTasks[a]();return eomTasks.length=0,!0}function newObservedObject(){function a(a){b&&b.state_===OPENED&&!d&&b.check_(a)}var b,c,d=!1,e=!0;return{open:function(c){if(b)throw Error("ObservedObject in use");e||Object.deliverChangeRecords(a),b=c,e=!1},observe:function(b,d){c=b,d?Array.observe(c,a):Object.observe(c,a)},deliver:function(b){d=b,Object.deliverChangeRecords(a),d=!1},close:function(){b=void 0,Object.unobserve(c,a),observedObjectCache.push(this)}}}function getObservedObject(a,b,c){var d=observedObjectCache.pop()||newObservedObject();return d.open(a),d.observe(b,c),d}function Observer(){this.state_=UNOPENED,this.callback_=void 0,this.target_=void 0,this.directObserver_=void 0,this.value_=void 0,this.id_=nextObserverId++}function addToAll(a){Observer._allObserversCount++,collectObservers&&allObservers.push(a)}function removeFromAll(){Observer._allObserversCount--}function ObjectObserver(a){Observer.call(this),this.value_=a,this.oldObject_=void 0}function diffObjectFromChangeRecords(a,b,c){for(var d={},e={},f=0;f<b.length;f++){var g=b[f];expectedRecordTypes[g.type]?(g.name in c||(c[g.name]=g.oldValue),"update"!=g.type&&("add"!=g.type?g.name in d?(delete d[g.name],delete c[g.name]):e[g.name]=!0:g.name in e?delete e[g.name]:d[g.name]=!0)):(console.error("Unknown changeRecord type: "+g.type),console.error(g))}for(var h in d)d[h]=a[h];for(var h in e)e[h]=void 0;var i={};for(var h in c)if(!(h in d||h in e)){var j=a[h];c[h]!==j&&(i[h]=j)}return{added:d,removed:e,changed:i}}var hasObserve=detectObjectObserve(),hasEval=detectEval(),createObject="__proto__"in{}?function(a){return a}:function(a){var b=a.__proto__;if(!b)return a;var c=Object.create(b);return Object.getOwnPropertyNames(a).forEach(function(b){Object.defineProperty(c,b,Object.getOwnPropertyDescriptor(a,b))}),c},MAX_DIRTY_CHECK_CYCLES=1e3,eomTasks=[],runEOM=hasObserve?function(){var a={pingPong:!0},b=!1;return Object.observe(a,function(){runEOMTasks(),b=!1}),function(c){eomTasks.push(c),b||(b=!0,a.pingPong=!a.pingPong)}}():function(){return function(a){eomTasks.push(a)}}(),observedObjectCache=[],UNOPENED=0,OPENED=1,CLOSED=2,nextObserverId=1;Observer.prototype={open:function(a,b){if(this.state_!=UNOPENED)throw Error("Observer has already been opened.");return addToAll(this),this.callback_=a,this.target_=b,this.connect_(),this.state_=OPENED,this.value_},close:function(){this.state_==OPENED&&(removeFromAll(this),this.disconnect_(),this.value_=void 0,this.callback_=void 0,this.target_=void 0,this.state_=CLOSED)},deliver:function(){this.state_==OPENED&&dirtyCheck(this)},report_:function(a){try{this.callback_.apply(this.target_,a)}catch(b){Observer._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(b.stack||b))}},discardChanges:function(){return this.check_(void 0,!0),this.value_}};var collectObservers=!hasObserve,allObservers;Observer._allObserversCount=0,collectObservers&&(allObservers=[]);var runningMicrotaskCheckpoint=!1,hasDebugForceFullDelivery=hasObserve&&hasEval&&function(){try{return eval("%RunMicrotasks()"),!0}catch(ex){return!1}}();global.Platform=global.Platform||{},global.Platform.performMicrotaskCheckpoint=function(){if(!runningMicrotaskCheckpoint){if(hasDebugForceFullDelivery)return void eval("%RunMicrotasks()");if(collectObservers){runningMicrotaskCheckpoint=!0;var cycles=0,anyChanged,toCheck;do{cycles++,toCheck=allObservers,allObservers=[],anyChanged=!1;for(var i=0;i<toCheck.length;i++){var observer=toCheck[i];observer.state_==OPENED&&(observer.check_()&&(anyChanged=!0),allObservers.push(observer))}runEOMTasks()&&(anyChanged=!0)}while(MAX_DIRTY_CHECK_CYCLES>cycles&&anyChanged);global.testingExposeCycleCount&&(global.dirtyCheckCycleCount=cycles),runningMicrotaskCheckpoint=!1}}},collectObservers&&(global.Platform.clearObservers=function(){allObservers=[]}),ObjectObserver.prototype=createObject({__proto__:Observer.prototype,arrayObserve:!1,connect_:function(){hasObserve?this.directObserver_=getObservedObject(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},copyObject:function(a){var b=Array.isArray(a)?[]:{};for(var c in a)b[c]=a[c];return Array.isArray(a)&&(b.length=a.length),b},check_:function(a){var b,c;if(hasObserve){if(!a)return!1;c={},b=diffObjectFromChangeRecords(this.value_,a,c)}else c=this.oldObject_,b=diffObjectFromOldObject(this.value_,this.oldObject_);return diffIsEmpty(b)?!1:(hasObserve||(this.oldObject_=this.copyObject(this.value_)),this.report_([b.added||{},b.removed||{},b.changed||{},function(a){return c[a]}]),!0)},disconnect_:function(){hasObserve?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},deliver:function(){this.state_==OPENED&&(hasObserve?this.directObserver_.deliver(!1):dirtyCheck(this))},discardChanges:function(){return this.directObserver_?this.directObserver_.deliver(!0):this.oldObject_=this.copyObject(this.value_),this.value_}});var observerSentinel={},expectedRecordTypes={add:!0,update:!0,"delete":!0};global.Observer=Observer,global.Observer.runEOM_=runEOM,global.Observer.observerSentinel_=observerSentinel,global.Observer.hasObjectObserve=hasObserve,global.ObjectObserver=ObjectObserver}((exports.Number={isNaN:window.isNaN})?exports:exports)},{}],2:[function(a,b){b.exports=a("./lib/axios")},{"./lib/axios":4}],3:[function(a,b){var c=a("./../buildUrl"),d=a("./../cookies"),e=a("./../defaults"),f=a("./../parseHeaders"),g=a("./../transformData"),h=a("./../urlIsSameOrigin"),i=a("./../utils");b.exports=function(a,b,j){var k=g(j.data,j.headers,j.transformRequest),l=i.merge(e.headers.common,e.headers[j.method]||{},j.headers||{}),m=new(XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP");m.open(j.method,c(j.url,j.params),!0),m.onreadystatechange=function(){if(m&&4===m.readyState){var c=f(m.getAllResponseHeaders()),d={data:g(m.responseText,c,j.transformResponse),status:m.status,headers:c,config:j};(m.status>=200&&m.status<300?a:b)(d.data,d.status,d.headers,d.config),m=null}};var n=h(j.url)?d.read(j.xsrfCookieName||e.xsrfCookieName):void 0;if(n&&(l[j.xsrfHeaderName||e.xsrfHeaderName]=n),i.forEach(l,function(a,b){k||"content-type"!==b.toLowerCase()?m.setRequestHeader(b,a):delete l[b]}),j.withCredentials&&(m.withCredentials=!0),j.responseType)try{m.responseType=j.responseType}catch(o){if("json"!==m.responseType)throw o}m.send(k)}},{"./../buildUrl":5,"./../cookies":6,"./../defaults":7,"./../parseHeaders":8,"./../transformData":10,"./../urlIsSameOrigin":11,"./../utils":12}],4:[function(a,b){(function(c){function d(){h.forEach(arguments,function(a){j[a]=function(b,c){return j(h.merge(c||{},{method:a,url:b}))}})}function e(){h.forEach(arguments,function(a){j[a]=function(b,c,d){return j(h.merge(d||{},{method:a,url:b,data:c}))}})}var f=a("es6-promise").Promise,g=a("./defaults"),h=a("./utils"),i=a("./spread"),j=b.exports=function(b){b=h.merge({method:"get",transformRequest:g.transformRequest,transformResponse:g.transformResponse},b),b.withCredentials=b.withCredentials||g.withCredentials;var d=new f(function(d,e){try{"undefined"!=typeof window?a("./adapters/xhr")(d,e,b):"undefined"!=typeof c&&a("./adapters/http")(d,e,b)}catch(f){e(f)}});return d.success=function(a){return d.then(function(b){a(b)}),d},d.error=function(a){return d.then(null,function(b){a(b)}),d},d};j.defaults=g,j.all=f.all,j.spread=i,d("delete","get","head"),e("post","put","patch")}).call(this,a("_process"))},{"./adapters/http":3,"./adapters/xhr":3,"./defaults":7,"./spread":9,"./utils":12,_process:33,"es6-promise":13}],5:[function(a,b){"use strict";function c(a){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}var d=a("./utils");b.exports=function(a,b){if(!b)return a;var e=[];return d.forEach(b,function(a,b){null!==a&&"undefined"!=typeof a&&(d.isArray(a)||(a=[a]),d.forEach(a,function(a){d.isDate(a)?a=a.toISOString():d.isObject(a)&&(a=JSON.stringify(a)),e.push(c(b)+"="+c(a))}))}),e.length>0&&(a+=(-1===a.indexOf("?")?"?":"&")+e.join("&")),a}},{"./utils":12}],6:[function(a,b){"use strict";var c=a("./utils");b.exports={write:function(a,b,d,e,f,g){var h=[];h.push(a+"="+encodeURIComponent(b)),c.isNumber(d)&&h.push("expires="+new Date(d).toGMTString()),c.isString(e)&&h.push("path="+e),c.isString(f)&&h.push("domain="+f),g===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(a){var b=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return b?decodeURIComponent(b[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}},{"./utils":12}],7:[function(a,b){"use strict";var c=a("./utils"),d=/^\s*(\[|\{[^\{])/,e=/[\}\]]\s*$/,f=/^\)\]\}',?\n/,g={"Content-Type":"application/json;charset=utf-8"};b.exports={transformRequest:[function(a){return!c.isObject(a)||c.isFile(a)||c.isBlob(a)?null:JSON.stringify(a)}],transformResponse:[function(a){return"string"==typeof a&&(a=a.replace(f,""),d.test(a)&&e.test(a)&&(a=JSON.parse(a))),a}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:c.merge(g),post:c.merge(g),put:c.merge(g)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"}},{"./utils":12}],8:[function(a,b){"use strict";var c=a("./utils");b.exports=function(a){var b,d,e,f={};return a?(c.forEach(a.split("\n"),function(a){e=a.indexOf(":"),b=c.trim(a.substr(0,e)).toLowerCase(),d=c.trim(a.substr(e+1)),b&&(f[b]=f[b]?f[b]+", "+d:d)}),f):f}},{"./utils":12}],9:[function(a,b){b.exports=function(a){return function(b){a.apply(null,b)}}},{}],10:[function(a,b){"use strict";var c=a("./utils");b.exports=function(a,b,d){return c.forEach(d,function(c){a=c(a,b)}),a}},{"./utils":12}],11:[function(a,b){"use strict";function c(a){var b=a;return d&&(f.setAttribute("href",b),b=f.href),f.setAttribute("href",b),{href:f.href,protocol:f.protocol?f.protocol.replace(/:$/,""):"",host:f.host,search:f.search?f.search.replace(/^\?/,""):"",hash:f.hash?f.hash.replace(/^#/,""):"",hostname:f.hostname,port:f.port,pathname:"/"===f.pathname.charAt(0)?f.pathname:"/"+f.pathname}}var d=/(msie|trident)/i.test(navigator.userAgent),e=a("./utils"),f=document.createElement("a"),g=c(window.location.href);b.exports=function(a){var b=e.isString(a)?c(a):a;return b.protocol===g.protocol&&b.host===g.host}},{"./utils":12}],12:[function(a,b){function c(a){return"[object Array]"===m.call(a)}function d(a){return"string"==typeof a}function e(a){return"number"==typeof a}function f(a){return null!==a&&"object"==typeof a}function g(a){return"[object Date]"===m.call(a)}function h(a){return"[object File]"===m.call(a)}function i(a){return"[object Blob]"===m.call(a)}function j(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}function k(a,b){if(null!==a&&"undefined"!=typeof a){var c=a.constructor===Array||"function"==typeof a.callee;if("object"==typeof a||c||(a=[a]),c)for(var d=0,e=a.length;e>d;d++)b.call(null,a[d],d,a);else for(var f in a)a.hasOwnProperty(f)&&b.call(null,a[f],f,a)}}function l(){var a={};return k(arguments,function(b){k(b,function(b,c){a[c]=b})}),a}var m=Object.prototype.toString;b.exports={isArray:c,isString:d,isNumber:e,isObject:f,isDate:g,isFile:h,isBlob:i,forEach:k,merge:l,trim:j}},{}],13:[function(a,b,c){"use strict";var d=a("./promise/promise").Promise,e=a("./promise/polyfill").polyfill;c.Promise=d,c.polyfill=e},{"./promise/polyfill":17,"./promise/promise":18}],14:[function(a,b,c){"use strict";function d(a){var b=this;if(!e(a))throw new TypeError("You must pass an array to all.");return new b(function(b,c){function d(a){return function(b){e(a,b)}}function e(a,c){h[a]=c,0===--i&&b(h)}var g,h=[],i=a.length;0===i&&b([]);for(var j=0;j<a.length;j++)g=a[j],g&&f(g.then)?g.then(d(j),c):e(j,g)})}var e=a("./utils").isArray,f=a("./utils").isFunction;c.all=d},{"./utils":22}],15:[function(a,b,c){(function(a,b){"use strict";function d(){return function(){a.nextTick(g)}}function e(){var a=0,b=new k(g),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function f(){return function(){l.setTimeout(g,1)}}function g(){for(var a=0;a<m.length;a++){var b=m[a],c=b[0],d=b[1];c(d)}m=[]}function h(a,b){var c=m.push([a,b]);1===c&&i()}var i,j="undefined"!=typeof window?window:{},k=j.MutationObserver||j.WebKitMutationObserver,l="undefined"!=typeof b?b:void 0===this?window:this,m=[];i="undefined"!=typeof a&&"[object process]"==={}.toString.call(a)?d():k?e():f(),c.asap=h}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:33}],16:[function(a,b,c){"use strict";function d(a,b){return 2!==arguments.length?e[a]:void(e[a]=b)}var e={instrument:!1};c.config=e,c.configure=d},{}],17:[function(a,b,c){(function(b){"use strict";function d(){var a;a="undefined"!=typeof b?b:"undefined"!=typeof window&&window.document?window:self;var c="Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;return new a.Promise(function(a){b=a}),f(b)}();c||(a.Promise=e)}var e=a("./promise").Promise,f=a("./utils").isFunction;c.polyfill=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./promise":18,"./utils":22}],18:[function(a,b,c){"use strict";function d(a){if(!q(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof d))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],e(a,this)}function e(a,b){function c(a){j(b,a)}function d(a){l(b,a)}try{a(c,d)}catch(e){d(e)}}function f(a,b,c,d){var e,f,g,h,k=q(c);if(k)try{e=c(d),g=!0}catch(m){h=!0,f=m}else e=d,g=!0;i(b,e)||(k&&g?j(b,e):h?l(b,f):a===y?j(b,e):a===z&&l(b,e))}function g(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+y]=c,e[f+z]=d}function h(a,b){for(var c,d,e=a._subscribers,g=a._detail,h=0;h<e.length;h+=3)c=e[h],d=e[h+b],f(b,c,d,g);a._subscribers=null}function i(a,b){var c,d=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(p(b)&&(d=b.then,q(d)))return d.call(b,function(d){return c?!0:(c=!0,void(b!==d?j(a,d):k(a,d)))},function(b){return c?!0:(c=!0,void l(a,b))}),!0}catch(e){return c?!0:(l(a,e),!0)}return!1}function j(a,b){a===b?k(a,b):i(a,b)||k(a,b)}function k(a,b){a._state===w&&(a._state=x,a._detail=b,o.async(m,a))}function l(a,b){a._state===w&&(a._state=x,a._detail=b,o.async(n,a))}function m(a){h(a,a._state=y)}function n(a){h(a,a._state=z)}var o=a("./config").config,p=(a("./config").configure,a("./utils").objectOrFunction),q=a("./utils").isFunction,r=(a("./utils").now,a("./all").all),s=a("./race").race,t=a("./resolve").resolve,u=a("./reject").reject,v=a("./asap").asap;o.async=v;var w=void 0,x=0,y=1,z=2;d.prototype={constructor:d,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,b){var c=this,d=new this.constructor(function(){});if(this._state){var e=arguments;o.async(function(){f(c._state,d,e[c._state-1],c._detail)})}else g(this,d,a,b);return d},"catch":function(a){return this.then(null,a)}},d.all=r,d.race=s,d.resolve=t,d.reject=u,c.Promise=d},{"./all":14,"./asap":15,"./config":16,"./race":19,"./reject":20,"./resolve":21,"./utils":22}],19:[function(a,b,c){"use strict";function d(a){var b=this;if(!e(a))throw new TypeError("You must pass an array to race.");return new b(function(b,c){for(var d,e=0;e<a.length;e++)d=a[e],d&&"function"==typeof d.then?d.then(b,c):b(d)})}var e=a("./utils").isArray;c.race=d},{"./utils":22}],20:[function(a,b,c){"use strict";function d(a){var b=this;return new b(function(b,c){c(a)})}c.reject=d},{}],21:[function(a,b,c){"use strict";function d(a){if(a&&"object"==typeof a&&a.constructor===this)return a;var b=this;return new b(function(b){b(a)})}c.resolve=d},{}],22:[function(a,b,c){"use strict";function d(a){return e(a)||"object"==typeof a&&null!==a}function e(a){return"function"==typeof a}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}var g=Date.now||function(){return(new Date).getTime()};c.objectOrFunction=d,c.isFunction=e,c.isArray=f,c.now=g},{}],23:[function(a,b){b.exports=a(13)},{"./promise/polyfill":27,"./promise/promise":28,"/Users/jason/github/js-data/node_modules/axios/node_modules/es6-promise/dist/commonjs/main.js":13}],24:[function(a,b){b.exports=a(14)},{"./utils":32,"/Users/jason/github/js-data/node_modules/axios/node_modules/es6-promise/dist/commonjs/promise/all.js":14}],25:[function(a,b){b.exports=a(15)},{"/Users/jason/github/js-data/node_modules/axios/node_modules/es6-promise/dist/commonjs/promise/asap.js":15,_process:33}],26:[function(a,b){b.exports=a(16)},{"/Users/jason/github/js-data/node_modules/axios/node_modules/es6-promise/dist/commonjs/promise/config.js":16}],27:[function(a,b){b.exports=a(17)},{"./promise":28,"./utils":32,"/Users/jason/github/js-data/node_modules/axios/node_modules/es6-promise/dist/commonjs/promise/polyfill.js":17}],28:[function(a,b){b.exports=a(18)},{"./all":24,"./asap":25,"./config":26,"./race":29,"./reject":30,"./resolve":31,"./utils":32,"/Users/jason/github/js-data/node_modules/axios/node_modules/es6-promise/dist/commonjs/promise/promise.js":18}],29:[function(a,b){b.exports=a(19)},{"./utils":32,"/Users/jason/github/js-data/node_modules/axios/node_modules/es6-promise/dist/commonjs/promise/race.js":19}],30:[function(a,b){b.exports=a(20)},{"/Users/jason/github/js-data/node_modules/axios/node_modules/es6-promise/dist/commonjs/promise/reject.js":20}],31:[function(a,b){b.exports=a(21)},{"/Users/jason/github/js-data/node_modules/axios/node_modules/es6-promise/dist/commonjs/promise/resolve.js":21}],32:[function(a,b){b.exports=a(22)},{"/Users/jason/github/js-data/node_modules/axios/node_modules/es6-promise/dist/commonjs/promise/utils.js":22}],33:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],34:[function(a,b){function c(a,b){return-1!==d(a,b)}var d=a("./indexOf");b.exports=c},{"./indexOf":37}],35:[function(a,b){function c(a,b,c){b=d(b,c);var e=[];if(null==a)return e;for(var f,g=-1,h=a.length;++g<h;)f=a[g],b(f,g,a)&&e.push(f);return e}var d=a("../function/makeIterator_");b.exports=c},{"../function/makeIterator_":44}],36:[function(a,b){function c(a,b,c){if(null!=a)for(var d=-1,e=a.length;++d<e&&b.call(c,a[d],d,a)!==!1;);}b.exports=c},{}],37:[function(a,b){function c(a,b,c){if(c=c||0,null==a)return-1;for(var d=a.length,e=0>c?d+c:c;d>e;){if(a[e]===b)return e;e++}return-1}b.exports=c},{}],38:[function(a,b){function c(a){return null!=a&&""!==a}function d(a,b){return b=b||"",e(a,c).join(b)}var e=a("./filter");b.exports=d},{"./filter":35}],39:[function(a,b){function c(a,b){var c=d(a,b);-1!==c&&a.splice(c,1)}var d=a("./indexOf");b.exports=c},{"./indexOf":37}],40:[function(a,b){function c(a,b,c){var d=a.length;b=null==b?0:0>b?Math.max(d+b,0):Math.min(b,d),c=null==c?d:0>c?Math.max(d+c,0):Math.min(c,d);for(var e=[];c>b;)e.push(a[b++]);return e}b.exports=c},{}],41:[function(a,b){function c(a,b){if(null==a)return[];if(a.length<2)return a;null==b&&(b=d);var f,g,h;return f=~~(a.length/2),g=c(a.slice(0,f),b),h=c(a.slice(f,a.length),b),e(g,h,b)}function d(a,b){return b>a?-1:a>b?1:0}function e(a,b,c){for(var d=[];a.length&&b.length;)d.push(c(a[0],b[0])<=0?a.shift():b.shift());return a.length&&d.push.apply(d,a),b.length&&d.push.apply(d,b),d}b.exports=c},{}],42:[function(a,b){function c(a,b){var c={};if(null==a)return c;var e,f=-1,g=a.length;if(d(b))for(;++f<g;)e=a[f],c[b(e)]=e;else for(;++f<g;)e=a[f],c[e[b]]=e;return c}var d=a("../lang/isFunction");b.exports=c},{"../lang/isFunction":51}],43:[function(a,b){function c(a){return a}b.exports=c},{}],44:[function(a,b){function c(a,b){if(null==a)return d;switch(typeof a){case"function":return"undefined"!=typeof b?function(c,d,e){return a.call(b,c,d,e)}:a;case"object":return function(b){return f(b,a)};case"string":case"number":return e(a)}}var d=a("./identity"),e=a("./prop"),f=a("../object/deepMatches");b.exports=c},{"../object/deepMatches":59,"./identity":43,"./prop":45}],45:[function(a,b){function c(a){return function(b){return b[a]}}b.exports=c},{}],46:[function(a,b){function c(a){switch(h(a)){case"Object":return d(a);case"Array":return g(a);case"RegExp":return e(a);case"Date":return f(a);default:return a}}function d(a){return i(a)?j({},a):a}function e(a){var b="";return b+=a.multiline?"m":"",b+=a.global?"g":"",b+=a.ignorecase?"i":"",new RegExp(a.source,b)}function f(a){return new Date(+a)}function g(a){return a.slice()}var h=a("./kindOf"),i=a("./isPlainObject"),j=a("../object/mixIn");b.exports=c},{"../object/mixIn":65,"./isPlainObject":55,"./kindOf":57}],47:[function(a,b){function c(a,b){switch(h(a)){case"Object":return d(a,b);case"Array":return e(a,b);default:return f(a)}}function d(a,b){if(i(a)){var d={};return g(a,function(a,d){this[d]=c(a,b)},d),d}return b?b(a):a}function e(a,b){for(var d=[],e=-1,f=a.length;++e<f;)d[e]=c(a[e],b);return d}var f=a("./clone"),g=a("../object/forOwn"),h=a("./kindOf"),i=a("./isPlainObject");b.exports=c},{"../object/forOwn":62,"./clone":46,"./isPlainObject":55,"./kindOf":57}],48:[function(a,b){var c=a("./isKind"),d=Array.isArray||function(a){return c(a,"Array")};b.exports=d},{"./isKind":52}],49:[function(a,b){function c(a){return d(a,"Boolean")}var d=a("./isKind");b.exports=c},{"./isKind":52}],50:[function(a,b){function c(a){if(null==a)return!0;if("string"==typeof a||e(a))return!a.length;if("object"==typeof a){var b=!0;return d(a,function(){return b=!1,!1}),b}return!0}var d=a("../object/forOwn"),e=a("./isArray");b.exports=c},{"../object/forOwn":62,"./isArray":48}],51:[function(a,b){function c(a){return d(a,"Function")}var d=a("./isKind");b.exports=c},{"./isKind":52}],52:[function(a,b){function c(a,b){return d(a)===b}var d=a("./kindOf");b.exports=c},{"./kindOf":57}],53:[function(a,b){function c(a){return d(a,"Number")}var d=a("./isKind");b.exports=c},{"./isKind":52}],54:[function(a,b){function c(a){return d(a,"Object")}var d=a("./isKind");b.exports=c},{"./isKind":52}],55:[function(a,b){function c(a){return!!a&&"object"==typeof a&&a.constructor===Object}b.exports=c},{}],56:[function(a,b){function c(a){return d(a,"String")}var d=a("./isKind");b.exports=c},{"./isKind":52}],57:[function(a,b){function c(a){return null===a?"Null":a===d?"Undefined":e.exec(f.call(a))[1]}var d,e=/^\[object (.*)\]$/,f=Object.prototype.toString;b.exports=c},{}],58:[function(a,b){function c(a){return null==a?"":a.toString()}b.exports=c},{}],59:[function(a,b){function c(a,b){for(var c=-1,d=a.length;++c<d;)if(f(a[c],b))return!0;return!1}function d(a,b){for(var d=-1,e=b.length;++d<e;)if(!c(a,b[d]))return!1;return!0}function e(a,b){var c=!0;return g(b,function(b,d){return f(a[d],b)?void 0:c=!1}),c}function f(a,b){return a&&"object"==typeof a?h(a)&&h(b)?d(a,b):e(a,b):a===b}var g=a("./forOwn"),h=a("../lang/isArray");b.exports=f},{"../lang/isArray":48,"./forOwn":62}],60:[function(a,b){function c(a){for(var b,c=0,f=arguments.length;++c<f;)b=arguments[c],b&&e(b,d,a);return a}function d(a,b){var d=this[b];f(a)&&f(d)?c(d,a):this[b]=a}var e=a("./forOwn"),f=a("../lang/isPlainObject");b.exports=c},{"../lang/isPlainObject":55,"./forOwn":62}],61:[function(a,b){function c(){g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=!0;for(var a in{toString:null})f=!1}function d(a,b,d){var i,j=0;null==f&&c();for(i in a)if(e(b,a,i,d)===!1)break;if(f)for(var k=a.constructor,l=!!k&&a===k.prototype;(i=g[j++])&&("constructor"===i&&(l||!h(a,i))||a[i]===Object.prototype[i]||e(b,a,i,d)!==!1););}function e(a,b,c,d){return a.call(d,b[c],c,b)}var f,g,h=a("./hasOwn");b.exports=d},{"./hasOwn":63}],62:[function(a,b){function c(a,b,c){e(a,function(e,f){return d(a,f)?b.call(c,a[f],f,a):void 0})}var d=a("./hasOwn"),e=a("./forIn");b.exports=c},{"./forIn":61,"./hasOwn":63}],63:[function(a,b){function c(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=c},{}],64:[function(a,b){function c(){var a,b,g,h,i=1;for(h=e(arguments[0]);g=arguments[i++];)for(a in g)d(g,a)&&(b=g[a],h[a]=f(b)&&f(h[a])?c(h[a],b):e(b));return h}var d=a("./hasOwn"),e=a("../lang/deepClone"),f=a("../lang/isObject");b.exports=c},{"../lang/deepClone":47,"../lang/isObject":54,"./hasOwn":63}],65:[function(a,b){function c(a){for(var b,c=0,f=arguments.length;++c<f;)b=arguments[c],null!=b&&e(b,d,a);return a}function d(a,b){this[b]=a}var e=a("./forOwn");b.exports=c},{"./forOwn":62}],66:[function(a,b){function c(a,b){return b?(d(b.split("."),function(b){a[b]||(a[b]={}),a=a[b]}),a):a}var d=a("../array/forEach");b.exports=c},{"../array/forEach":36}],67:[function(a,b){function c(a){for(var b,c="string"!=typeof arguments[1]?arguments[1]:d(arguments,1),e={},f=0;b=c[f++];)e[b]=a[b];return e}var d=a("../array/slice");b.exports=c},{"../array/slice":40}],68:[function(a,b){function c(a,b,c){var e=/^(.+)\.(.+)$/.exec(b);e?d(a,e[1])[e[2]]=c:a[b]=c}var d=a("./namespace");b.exports=c},{"./namespace":66}],69:[function(a,b){function c(a){return a=d(a),a=e(a),a=f(a).replace(/[\-_]/g," ").replace(/\s[a-z]/g,g).replace(/\s+/g,"").replace(/^[A-Z]/g,h)}var d=a("../lang/toString"),e=a("./replaceAccents"),f=a("./removeNonWord"),g=a("./upperCase"),h=a("./lowerCase");b.exports=c},{"../lang/toString":58,"./lowerCase":70,"./removeNonWord":73,"./replaceAccents":74,"./upperCase":75}],70:[function(a,b){function c(a){return a=d(a),a.toLowerCase()}var d=a("../lang/toString");b.exports=c},{"../lang/toString":58}],71:[function(a,b){function c(){var a=d(e(arguments),"/");return a.replace(/([^:\/]|^)\/{2,}/g,"$1/")}var d=a("../array/join"),e=a("../array/slice");b.exports=c},{"../array/join":38,"../array/slice":40}],72:[function(a,b){function c(a){return a=d(a),e(a).replace(/^[a-z]/,f)}var d=a("../lang/toString"),e=a("./camelCase"),f=a("./upperCase");b.exports=c},{"../lang/toString":58,"./camelCase":69,"./upperCase":75}],73:[function(a,b){function c(a){return a=d(a),a.replace(e,"")}var d=a("../lang/toString"),e=/[^\x20\x2D0-9A-Z\x5Fa-z\xC0-\xD6\xD8-\xF6\xF8-\xFF]/g;b.exports=c},{"../lang/toString":58}],74:[function(a,b){function c(a){return a=d(a),a.search(/[\xC0-\xFF]/g)>-1&&(a=a.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),a}var d=a("../lang/toString");b.exports=c},{"../lang/toString":58}],75:[function(a,b){function c(a){return a=d(a),a.toUpperCase()}var d=a("../lang/toString");b.exports=c},{"../lang/toString":58}],76:[function(a,b){function c(){}function d(a){this.defaults=new c,e.deepMixIn(this.defaults,a)}var e=a("../utils");c.prototype.queryTransform=function(a,b){return b},c.prototype.httpConfig={},d.prototype.HTTP=function(a){var b=(new Date).getTime();return a=e.deepMixIn(a,this.defaults.httpConfig),e.http(a).then(function(c){return console.log(a.method+" request:"+a.url+" Time taken: "+((new Date).getTime()-b)+"ms",arguments),c})},d.prototype.GET=function(a,b){return b=b||{},"method"in b||(b.method="get"),this.HTTP(e.deepMixIn(b,{url:a}))},d.prototype.POST=function(a,b,c){return c=c||{},"method"in c||(c.method="post"),this.HTTP(e.deepMixIn(c,{url:a,data:b}))},d.prototype.PUT=function(a,b,c){return c=c||{},"method"in c||(c.method="put"),this.HTTP(e.deepMixIn(c,{url:a,data:b||{}}))},d.prototype.DEL=function(a,b){return b=b||{},"method"in b||(b.method="delete"),this.HTTP(e.deepMixIn(b,{url:a}))},d.prototype.find=function(a,b,c){return c=c||{},this.GET(e.makePath(c.baseUrl||a.baseUrl,a.getEndpoint(b,c),b),c)},d.prototype.findAll=function(a,b,c){return c=c||{},c.params=c.params||{},b&&(b=this.defaults.queryTransform(a.name,b),e.deepMixIn(c.params,b)),this.GET(e.makePath(c.baseUrl||a.baseUrl,a.getEndpoint(null,c)),c)},d.prototype.create=function(a,b,c){return c=c||{},this.POST(e.makePath(c.baseUrl||a.baseUrl,a.getEndpoint(b,c)),b,c)},d.prototype.update=function(a,b,c,d){return d=d||{},this.PUT(e.makePath(d.baseUrl||a.baseUrl,a.getEndpoint(b,d),b),c,d)},d.prototype.updateAll=function(a,b,c,d){return d=d||{},d.params=d.params||{},c&&(c=this.defaults.queryTransform(a.name,c),e.deepMixIn(d.params,c)),this.PUT(e.makePath(d.baseUrl||a.baseUrl,a.getEndpoint(null,d)),b,d)},d.prototype.destroy=function(a,b,c){return c=c||{},this.DEL(e.makePath(c.baseUrl||a.baseUrl,a.getEndpoint(b,c),b),c)},d.prototype.destroyAll=function(a,b,c){return c=c||{},c.params=c.params||{},b&&(b=this.defaults.queryTransform(a.name,b),e.deepMixIn(c.params,b)),this.DEL(e.makePath(c.baseUrl||a.baseUrl,a.getEndpoint(null,c)),c)},b.exports=d},{"../utils":112}],77:[function(a,b){function c(){}var d=a("../utils"),e=a("../errors");c.prototype.GET=function(a){return new d.Promise(function(b){var c=localStorage.getItem(a);b(c?d.fromJson(c):void 0)})},c.prototype.PUT=function(a,b){var c=this;
return c.GET(a).then(function(e){return e&&d.deepMixIn(e,b),localStorage.setItem(a,d.toJson(e||b)),c.GET(a)})},c.prototype.DEL=function(a){return new d.Promise(function(b){localStorage.removeItem(a),b()})},c.prototype.find=function(a,b,c){return c=c||{},this.GET(d.makePath(c.baseUrl||a.baseUrl,a.endpoint,b))},c.prototype.findAll=function(){throw new Error("DSLocalStorageAdapter.findAll is not supported!")},c.prototype.create=function(a,b,c){if(!(a.idAttribute in b))throw new e.IA("DSLocalStorageAdapter.create: You must provide a primary key in the attrs object!");return c=c||{},this.PUT(d.makePath(c.baseUrl||a.baseUrl,a.getEndpoint(b,c),b[a.idAttribute]),b)},c.prototype.update=function(a,b,c,e){return e=e||{},this.PUT(d.makePath(e.baseUrl||a.baseUrl,a.getEndpoint(b,e),b),c)},c.prototype.updateAll=function(){throw new Error("DSLocalStorageAdapter.updateAll is not supported!")},c.prototype.destroy=function(a,b,c){return c=c||{},this.DEL(d.makePath(c.baseUrl||a.baseUrl,a.getEndpoint(b,c),b))},c.prototype.destroyAll=function(){throw new Error("Not supported!")},b.exports=c},{"../errors":110,"../utils":112}],78:[function(a,b){function c(a){return"DS.create("+a+", attrs[, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.errors,h=e.definitions[a],i=new f.Promise(function(e,i){d=d||{},h?f.isObject(b)?("cacheResponse"in d||(d.cacheResponse=!0),"upsert"in d||(d.upsert=!0),e(b)):i(new g.IA(c(a)+"attrs: Must be an object!")):i(new g.NER(c(a)+a))});return d.upsert&&b[h.idAttribute]?e.update(a,b[h.idAttribute],b,d):i.then(function(b){var c=d.beforeValidate?f.promisify(d.beforeValidate):h.beforeValidate;return c.call(b,a,b)}).then(function(b){var c=d.validate?f.promisify(d.validate):h.validate;return c.call(b,a,b)}).then(function(b){var c=d.afterValidate?f.promisify(d.afterValidate):h.afterValidate;return c.call(b,a,b)}).then(function(b){var c=d.beforeCreate?f.promisify(d.beforeCreate):h.beforeCreate;return c.call(b,a,b)}).then(function(b){return e.notify(h,"beforeCreate",f.merge({},b)),e.adapters[d.adapter||h.defaultAdapter].create(h,d.serialize?d.serialize(a,b):h.serialize(a,b),d)}).then(function(b){var c=d.afterCreate?f.promisify(d.afterCreate):h.afterCreate,e=d.deserialize?d.deserialize(a,b):h.deserialize(a,b);return c.call(e,a,e)}).then(function(b){if(e.notify(h,"afterCreate",f.merge({},b)),d.cacheResponse){var c=e.store[a],g=e.inject(h.name,b,d),i=g[h.idAttribute];return c.completedQueries[i]=(new Date).getTime(),c.previousAttributes[i]=f.deepMixIn({},g),c.saved[i]=f.updateTimestamp(c.saved[i]),e.get(h.name,i)}return e.createInstance(a,b,d)})}b.exports=d},{}],79:[function(a,b){function c(a,b){return"DS.destroy("+a+", "+b+"[, options]): "}function d(a,b,d){var e,f=this,g=f.utils,h=f.errors,i=f.definitions[a];return new g.Promise(function(j,k){d=d||{},i?g.isString(b)||g.isNumber(b)?f.get(a,b)?(e=f.get(a,b),j(e)):k(new h.R(c(a,b)+'id: "'+b+'" not found!')):k(new h.IA(c(a,b)+"id: Must be a string or a number!")):k(new h.NER(c(a,b)+a))}).then(function(b){var c=d.beforeDestroy?g.promisify(d.beforeDestroy):i.beforeDestroy;return c.call(b,a,b)}).then(function(a){return f.notify(i,"beforeDestroy",g.merge({},a)),f.adapters[d.adapter||i.defaultAdapter].destroy(i,b,d)}).then(function(){var b=d.afterDestroy?g.promisify(d.afterDestroy):i.afterDestroy;return b.call(e,a,e)}).then(function(c){return f.notify(i,"afterDestroy",g.merge({},c)),f.eject(a,b),b})}b.exports=d},{}],80:[function(a,b){function c(a){return"DS.destroyAll("+a+", params[, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.errors,h=e.definitions[a];return new f.Promise(function(e,i){d=d||{},h?f.isObject(b)?f.isObject(d)?e():i(new g.IA(c(a)+"options: Must be an object!")):i(new g.IA(c(a)+"params: Must be an object!")):i(new g.NER(c(a)+a))}).then(function(){return e.adapters[d.adapter||h.defaultAdapter].destroyAll(h,b,d)}).then(function(){return e.ejectAll(a,b)})}b.exports=d},{}],81:[function(a,b){function c(a,b){return"DS.find("+a+", "+b+"[, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.errors,h=e.definitions[a],i=e.store[a];return new f.Promise(function(j,k){d=d||{},h?f.isString(b)||f.isNumber(b)?f.isObject(d)?("cacheResponse"in d||(d.cacheResponse=!0),(d.bypassCache||!d.cacheResponse)&&delete i.completedQueries[b],b in i.completedQueries?j(e.get(a,b)):j()):k(new g.IA(c(a,b)+"options: Must be an object!")):k(new g.IA(c(a,b)+"id: Must be a string or a number!")):k(new g.NER(c(a,b)+a))}).then(function(c){return b in i.completedQueries?c:(b in i.pendingQueries||(i.pendingQueries[b]=e.adapters[d.adapter||h.defaultAdapter].find(h,b,d).then(function(c){var f=d.deserialize?d.deserialize(a,c):h.deserialize(a,c);return d.cacheResponse?(delete i.pendingQueries[b],i.completedQueries[b]=(new Date).getTime(),e.inject(a,f,d)):e.createInstance(a,f,d)}).catch(function(a){throw delete i.pendingQueries[b],a})),i.pendingQueries[b])})}b.exports=d},{}],82:[function(a,b){function c(a){return"DS.findAll("+a+", params[, options]): "}function d(a,b,d,e){var f=this,g=f.store[b],h=f.definitions[b].idAttribute,i=(new Date).getTime();a=a||[],delete g.pendingQueries[d],g.completedQueries[d]=i,g.collectionModified=f.utils.updateTimestamp(g.collectionModified);var j=f.inject(b,a,e);return f.utils.isArray(j)?f.utils.forEach(j,function(a){a&&a[h]&&(g.completedQueries[a[h]]=i)}):(console.warn(c(b)+"response is expected to be an array!"),g.completedQueries[j[h]]=i),j}function e(a,b,e){var f,g=this,h=g.utils,i=g.errors,j=g.definitions[a],k=g.store[a];return new h.Promise(function(d,j){e=e||{},b=b||{},g.definitions[a]?h.isObject(b)?h.isObject(e)?("cacheResponse"in e||(e.cacheResponse=!0),f=g.utils.toJson(b),(e.bypassCache||!e.cacheResponse)&&delete k.completedQueries[f],f in k.completedQueries?d(g.filter(a,b,e)):d()):j(new i.IA(c(a)+"options: Must be an object!")):j(new i.IA(c(a)+"params: Must be an object!")):j(new i.NER(c(a)+a))}).then(function(c){return f in k.completedQueries?c:(f in k.pendingQueries||(k.pendingQueries[f]=g.adapters[e.adapter||j.defaultAdapter].findAll(j,b,e).then(function(b){delete k.pendingQueries[f];var c=e.deserialize?e.deserialize(a,b):j.deserialize(a,b);if(!e.cacheResponse)return g.utils.forEach(c,function(b,d){c[d]=g.createInstance(a,b,e)}),c;try{return d.call(g,c,a,f,e)}catch(h){throw h}}).catch(function(a){throw delete k.pendingQueries[f],a})),k.pendingQueries[f])})}b.exports=e},{}],83:[function(a,b){b.exports={create:a("./create"),destroy:a("./destroy"),destroyAll:a("./destroyAll"),find:a("./find"),findAll:a("./findAll"),loadRelations:a("./loadRelations"),refresh:a("./refresh"),save:a("./save"),update:a("./update"),updateAll:a("./updateAll")}},{"./create":78,"./destroy":79,"./destroyAll":80,"./find":81,"./findAll":82,"./loadRelations":84,"./refresh":85,"./save":86,"./update":87,"./updateAll":88}],84:[function(a,b){function c(a){return"DS.loadRelations("+a+", instance(Id), relations[, options]): "}function d(a,b,d,e){var f=this,g=f.utils,h=f.errors,i=f.definitions[a],j=[];return new g.Promise(function(k,l){if(e=e||{},(g.isString(b)||g.isNumber(b))&&(b=f.get(a,b)),g.isString(d)&&(d=[d]),i)if(g.isObject(b))if(g.isArray(d))if(g.isObject(e)){"findBelongsTo"in e||(e.findBelongsTo=!0),"findHasMany"in e||(e.findHasMany=!0);var m=[];g.forEach(i.relationList,function(a){var c=a.relation;if(g.contains(d,c)){var h,k={};k[a.foreignKey]=b[i.idAttribute],"hasMany"===a.type?h=f.findAll(c,k,e):"hasOne"===a.type?a.localKey&&b[a.localKey]?h=f.find(c,b[a.localKey],e):a.foreignKey&&(h=f.findAll(c,k,e).then(function(a){return a.length?a[0]:null})):h=f.find(c,b[a.localKey],e),h&&(m.push(h),j.push(a.localField))}}),k(m)}else l(new h.IA(c(a)+"options: Must be an object!"));else l(new h.IA(c(a)+"relations: Must be a string or an array!"));else l(new h.IA(c(a)+"instance(Id): Must be a string, number or object!"));else l(new f.errors.NER(c(a)+a))}).then(function(a){return g.Promise.all(a)}).then(function(a){return g.forEach(j,function(c,d){b[c]=a[d]}),b})}b.exports=d},{}],85:[function(a,b){function c(a,b){return"DS.refresh("+a+", "+b+"[, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.errors;return new f.Promise(function(h,i){d=d||{},e.definitions[a]?f.isString(b)||f.isNumber(b)?f.isObject(d)?(d.bypassCache=!0,h(e.get(a,b))):i(new g.IA(c(a,b)+"options: Must be an object!")):i(new g.IA(c(a,b)+"id: Must be a string or a number!")):i(new e.errors.NER(c(a,b)+a))}).then(function(c){return c?e.find(a,b,d):c})}b.exports=d},{}],86:[function(a,b){function c(a,b){return"DS.save("+a+", "+b+"[, options]): "}function d(a,b,d){var e,f=this,g=f.utils,h=f.errors,i=f.definitions[a];return new g.Promise(function(j,k){d=d||{},i?g.isString(b)||g.isNumber(b)?g.isObject(d)?f.get(a,b)?(e=f.get(a,b),"cacheResponse"in d||(d.cacheResponse=!0),j(e)):k(new h.R(c(a,b)+'id: "'+b+'" not found!')):k(new h.IA(c(a,b)+"options: Must be an object!")):k(new h.IA(c(a,b)+"id: Must be a string or a number!")):k(new h.NER(c(a,b)+a))}).then(function(b){var c=d.beforeValidate?g.promisify(d.beforeValidate):i.beforeValidate;return c.call(b,a,b)}).then(function(b){var c=d.validate?g.promisify(d.validate):i.validate;return c.call(b,a,b)}).then(function(b){var c=d.afterValidate?g.promisify(d.afterValidate):i.afterValidate;return c.call(b,a,b)}).then(function(b){var c=d.beforeUpdate?g.promisify(d.beforeUpdate):i.beforeUpdate;return c.call(b,a,b)}).then(function(c){if(f.notify(i,"beforeUpdate",g.merge({},c)),d.changesOnly){var e=f.store[a];e.observers[b].deliver();var h=[],j=f.changes(a,b);for(var k in j.added)h.push(k);for(k in j.changed)h.push(k);if(j=g.pick(c,h),g.isEmpty(j))return c;c=j}return f.adapters[d.adapter||i.defaultAdapter].update(i,b,d.serialize?d.serialize(a,c):i.serialize(a,c),d)}).then(function(b){var c=d.afterUpdate?g.promisify(d.afterUpdate):i.afterUpdate,e=d.deserialize?d.deserialize(a,b):i.deserialize(a,b);return c.call(e,a,e)}).then(function(c){if(f.notify(i,"afterUpdate",g.merge({},c)),d.cacheResponse){var e=f.store[a],h=f.inject(i.name,c,d);return e.previousAttributes[b]=g.deepMixIn({},h),e.saved[b]=g.updateTimestamp(e.saved[b]),e.observers[b].discardChanges(),f.get(a,b)}return c})}b.exports=d},{}],87:[function(a,b){function c(a,b){return"DS.update("+a+", "+b+", attrs[, options]): "}function d(a,b,d,e){var f=this,g=f.utils,h=f.errors,i=f.definitions[a];return new g.Promise(function(f,j){e=e||{},i?g.isString(b)||g.isNumber(b)?g.isObject(d)?g.isObject(e)?("cacheResponse"in e||(e.cacheResponse=!0),f(d)):j(new h.IA(c(a,b)+"options: Must be an object!")):j(new h.IA(c(a,b)+"attrs: Must be an object!")):j(new h.IA(c(a,b)+"id: Must be a string or a number!")):j(new h.NER(c(a,b)+a))}).then(function(b){var c=e.beforeValidate?g.promisify(e.beforeValidate):i.beforeValidate;return c.call(b,a,b)}).then(function(b){var c=e.validate?g.promisify(e.validate):i.validate;return c.call(b,a,b)}).then(function(b){var c=e.afterValidate?g.promisify(e.afterValidate):i.afterValidate;return c.call(b,a,b)}).then(function(b){var c=e.beforeUpdate?g.promisify(e.beforeUpdate):i.beforeUpdate;return c.call(b,a,b)}).then(function(c){return f.notify(i,"beforeUpdate",g.merge({},c)),f.adapters[e.adapter||i.defaultAdapter].update(i,b,e.serialize?e.serialize(a,c):i.serialize(a,c),e)}).then(function(b){var c=e.afterUpdate?g.promisify(e.afterUpdate):i.afterUpdate,d=e.deserialize?e.deserialize(a,b):i.deserialize(a,b);return c.call(d,a,d)}).then(function(b){if(f.notify(i,"afterUpdate",g.merge({},b)),e.cacheResponse){var c=f.store[a],d=f.inject(i.name,b,e),h=d[i.idAttribute];return c.previousAttributes[h]=g.deepMixIn({},d),c.saved[h]=g.updateTimestamp(c.saved[h]),c.observers[h].discardChanges(),f.get(i.name,h)}return b})}b.exports=d},{}],88:[function(a,b){function c(a){return"DS.updateAll("+a+", attrs, params[, options]): "}function d(a,b,d,e){var f=this,g=f.utils,h=f.errors,i=f.definitions[a];return new g.Promise(function(f,j){e=e||{},i?g.isObject(b)?g.isObject(d)?g.isObject(e)?("cacheResponse"in e||(e.cacheResponse=!0),f(b)):j(new h.IA(c(a)+"options: Must be an object!")):j(new h.IA(c(a)+"params: Must be an object!")):j(new h.IA(c(a)+"attrs: Must be an object!")):j(new h.NER(c(a)+a))}).then(function(b){var c=e.beforeValidate?g.promisify(e.beforeValidate):i.beforeValidate;return c.call(b,a,b)}).then(function(b){var c=e.validate?g.promisify(e.validate):i.validate;return c.call(b,a,b)}).then(function(b){var c=e.afterValidate?g.promisify(e.afterValidate):i.afterValidate;return c.call(b,a,b)}).then(function(b){var c=e.beforeUpdate?g.promisify(e.beforeUpdate):i.beforeUpdate;return c.call(b,a,b)}).then(function(b){return f.notify(i,"beforeUpdate",g.merge({},b)),f.adapters[e.adapter||i.defaultAdapter].updateAll(i,e.serialize?e.serialize(a,b):i.serialize(a,b),d,e)}).then(function(b){var c=e.afterUpdate?g.promisify(e.afterUpdate):i.afterUpdate,d=e.deserialize?e.deserialize(a,b):i.deserialize(a,b);return c.call(d,a,d)}).then(function(a){return f.notify(i,"afterUpdate",g.merge({},b)),e.cacheResponse?f.inject(i.name,a,e):a})}b.exports=d},{}],89:[function(a,b){function c(a,b,c){c(null,b)}function d(){}function e(a){this.defaults=new d,f.deepMixIn(this.defaults,a),this.notify=function(a,b){var c=Array.prototype.slice.call(arguments,2);c.unshift(a.name),c.unshift("DS."+b),a.emit.apply(a,c)},this.store={},this.definitions={},this.adapters={DSHttpAdapter:new h,DSLocalStorageAdapter:new i}}var f=a("../utils"),g=a("../errors"),h=a("../adapters/http"),i=a("../adapters/localStorage"),j=a("./sync_methods"),k=a("./async_methods");f.deepFreeze(j),f.deepFreeze(k),f.deepFreeze(g),f.deepFreeze(f),d.prototype.idAttribute="id",d.prototype.defaultAdapter="DSHttpAdapter",d.prototype.defaultFilter=function(a,b,c,d){var e=this,g=a,h=null,i={skip:"",offset:"",where:"",limit:"",orderBy:"",sort:""};h=f.isObject(c.where)?c.where:{},d.allowSimpleWhere&&f.forOwn(c,function(a,b){b in i||b in h||(h[b]={"==":a})}),f.isEmpty(h)&&(h=null),h&&(g=f.filter(g,function(a){var b=!0,c=!0;return f.forOwn(h,function(d,e){f.isString(d)?d={"===":d}:(f.isNumber(d)||f.isBoolean(d))&&(d={"==":d}),f.isObject(d)&&f.forOwn(d,function(d,g){"=="===g?c=b?a[e]==d:c&&a[e]==d:"==="===g?c=b?a[e]===d:c&&a[e]===d:"!="===g?c=b?a[e]!=d:c&&a[e]!=d:"!=="===g?c=b?a[e]!==d:c&&a[e]!==d:">"===g?c=b?a[e]>d:c&&a[e]>d:">="===g?c=b?a[e]>=d:c&&a[e]>=d:"<"===g?c=b?a[e]<d:c&&a[e]<d:"<="===g?c=b?a[e]<=d:c&&a[e]<=d:"in"===g?c=b?f.contains(d,a[e]):c&&f.contains(d,a[e]):"notIn"===g?c=b?!f.contains(d,a[e]):c&&!f.contains(d,a[e]):"|=="===g?c=b?a[e]==d:c||a[e]==d:"|==="===g?c=b?a[e]===d:c||a[e]===d:"|!="===g?c=b?a[e]!=d:c||a[e]!=d:"|!=="===g?c=b?a[e]!==d:c||a[e]!==d:"|>"===g?c=b?a[e]>d:c||a[e]>d:"|>="===g?c=b?a[e]>=d:c||a[e]>=d:"|<"===g?c=b?a[e]<d:c||a[e]<d:"|<="===g?c=b?a[e]<=d:c||a[e]<=d:"|in"===g?c=b?f.contains(d,a[e]):c||f.contains(d,a[e]):"|notIn"===g&&(c=b?!f.contains(d,a[e]):c||!f.contains(d,a[e])),b=!1})}),c}));var j=null;f.isString(c.orderBy)?j=[[c.orderBy,"ASC"]]:f.isArray(c.orderBy)&&(j=c.orderBy),!j&&f.isString(c.sort)?j=[[c.sort,"ASC"]]:!j&&f.isArray(c.sort)&&(j=c.sort),j&&f.forEach(j,function(a){if(f.isString(a))a=[a,"ASC"];else if(!f.isArray(a))throw new e.errors.IllegalArgumentError("DS.filter(resourceName[, params][, options]): "+f.toJson(a)+": Must be a string or an array!",{params:{"orderBy[i]":{actual:typeof a,expected:"string|array"}}});g=f.sort(g,function(b,c){var d=b[a[0]],e=c[a[0]];return f.isString(d)&&(d=f.upperCase(d)),f.isString(e)&&(e=f.upperCase(e)),"DESC"===a[1]?d>e?-1:e>d?1:0:e>d?-1:d>e?1:0})});var k=f.isNumber(c.limit)?c.limit:null,l=null;return f.isNumber(c.skip)?l=c.skip:f.isNumber(c.offset)&&(l=c.offset),k&&l?g=f.slice(g,l,Math.min(g.length,l+k)):f.isNumber(k)?g=f.slice(g,0,Math.min(g.length,k)):f.isNumber(l)&&(g=l<g.length?f.slice(g,l):[]),g},d.prototype.baseUrl="",d.prototype.endpoint="",d.prototype.useClass=!0,d.prototype.keepChangeHistory=!1,d.prototype.resetHistoryOnInject=!0,d.prototype.beforeValidate=c,d.prototype.validate=c,d.prototype.afterValidate=c,d.prototype.beforeCreate=c,d.prototype.afterCreate=c,d.prototype.beforeUpdate=c,d.prototype.afterUpdate=c,d.prototype.beforeDestroy=c,d.prototype.afterDestroy=c,d.prototype.beforeInject=function(a,b){return b},d.prototype.afterInject=function(a,b){return b},d.prototype.serialize=function(a,b){return b},d.prototype.deserialize=function(a,b){return b},e.prototype.errors=a("../errors"),e.prototype.utils=f,f.deepMixIn(e.prototype,j),f.deepMixIn(e.prototype,k),b.exports=e},{"../adapters/http":76,"../adapters/localStorage":77,"../errors":110,"../utils":112,"./async_methods":83,"./sync_methods":101}],90:[function(a,b){function c(a){return"DS.changeHistory("+a+", id): "}function d(a,b){var d=this,e=d.utils,f=d.definitions[a],g=d.store[a];if(a&&!d.definitions[a])throw new d.errors.NER(c(a)+a);if(b&&!e.isString(b)&&!e.isNumber(b))throw new d.errors.IA(c(a)+"id: Must be a string or a number!");if(f.keepChangeHistory){if(!a)return g.changeHistory;var h=d.get(a,b);if(h)return g.changeHistories[b]}else console.warn(c(a)+"changeHistory is disabled for this resource!")}b.exports=d},{}],91:[function(a,b){function c(a){return"DS.changes("+a+", id): "}function d(a,b){var d=this,e=d.utils,f=d.errors;if(!d.definitions[a])throw new f.NER(c(a)+a);if(!e.isString(b)&&!e.isNumber(b))throw new f.IA(c(a)+"id: Must be a string or a number!");var g=d.get(a,b);if(g){d.store[a].observers[b].deliver();var h=e.diffObjectFromOldObject(g,d.store[a].previousAttributes[b]);return e.forOwn(h,function(a,b){var c=[];e.forOwn(a,function(a,b){e.isFunction(a)||c.push(b)}),h[b]=e.pick(h[b],c)}),h}}b.exports=d},{}],92:[function(a,b){function c(a){return"DS.compute("+a+", instance): "}function d(a,b,c){var d=this,e=[];c.forEach(a.deps,function(a){e.push(d[a])}),this[b]=a[a.length-1].apply(this,e)}function e(a,b){var e=this,f=e.utils,g=e.errors,h=e.definitions[a];if(!h)throw new g.NER(c(a)+a);if(!f.isObject(b)&&!f.isString(b)&&!f.isNumber(b))throw new g.IA(c(a)+"instance: Must be an object, string or number!");return(f.isString(b)||f.isNumber(b))&&(b=e.get(a,b)),f.forOwn(h.computed,function(a,c){d.call(b,a,c,f)}),b}b.exports={compute:e,_compute:d}},{}],93:[function(a,b){function c(a){return"DS.createInstance("+a+"[, attrs][, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.errors,h=e.definitions[a];if(b=b||{},d=d||{},!h)throw new g.NER(c(a)+a);if(b&&!f.isObject(b))throw new g.IA(c(a)+"attrs: Must be an object!");if(!f.isObject(d))throw new g.IA(c(a)+"options: Must be an object!");"useClass"in d||(d.useClass=h.useClass);var i;if(d.useClass){var j=h[h.class];i=new j}else i={};return f.deepMixIn(i,b)}b.exports=d},{}],94:[function(require,module,exports){function Resource(a,b){a.deepMixIn(this,b),this.endpoint="endpoint"in b?b.endpoint:this.name}function defineResource(definition){var DS=this,DSUtils=DS.utils,DSErrors=DS.errors,definitions=DS.definitions;if(DSUtils.isString(definition)&&(definition=definition.replace(/\s/gi,""),definition={name:definition}),!DSUtils.isObject(definition))throw new DSErrors.IA(errorPrefix+"definition: Must be an object!");if(!DSUtils.isString(definition.name))throw new DSErrors.IA(errorPrefix+"definition.name: Must be a string!");if(definition.idAttribute&&!DSUtils.isString(definition.idAttribute))throw new DSErrors.IA(errorPrefix+"definition.idAttribute: Must be a string!");if(definition.endpoint&&!DSUtils.isString(definition.endpoint))throw new DSErrors.IA(errorPrefix+"definition.endpoint: Must be a string!");if(DS.store[definition.name])throw new DSErrors.R(errorPrefix+definition.name+" is already registered!");try{Resource.prototype=DS.defaults,definitions[definition.name]=new Resource(DSUtils,definition);var def=definitions[definition.name];return def.relations&&(def.relationList=[],def.relationFields=[],DSUtils.forOwn(def.relations,function(a,b){DSUtils.forOwn(a,function(c,d){DSUtils.isArray(c)||(a[d]=[c]),DSUtils.forEach(a[d],function(a){a.type=b,a.relation=d,a.name=def.name,def.relationList.push(a),def.relationFields.push(a.localField)})})}),def.relations.belongsTo&&DSUtils.forOwn(def.relations.belongsTo,function(a,b){DSUtils.forEach(a,function(a){a.parent&&(def.parent=b,def.parentKey=a.localKey)})}),DSUtils.deepFreeze(def.relations),DSUtils.deepFreeze(def.relationList)),def.getEndpoint=function(a,b){var c,d,e=this.parent,f=this.parentKey,g=b.endpoint||this.endpoint;return delete b.endpoint,b=b||{},b.params=b.params||{},e&&f&&definitions[e]&&b.params[f]!==!1&&((DSUtils.isNumber(a)||DSUtils.isString(a))&&(c=DS.get(this.name,a)),DSUtils.isObject(a)&&f in a?(delete b.params[f],d=DSUtils.makePath(definitions[e].getEndpoint(a,b),a[f],g)):c&&f in c?(delete b.params[f],d=DSUtils.makePath(definitions[e].getEndpoint(a,b),c[f],g)):b&&b.params[f]&&(d=DSUtils.makePath(definitions[e].getEndpoint(a,b),b.params[f],g),delete b.params[f])),b.params[f]===!1&&delete b.params[f],d||g},def.filter&&(def.defaultFilter=def.filter,delete def.filter),def.class=DSUtils.pascalCase(definition.name),eval("function "+def.class+"() {}"),def[def.class]=eval(def.class),def.methods&&DSUtils.deepMixIn(def[def.class].prototype,def.methods),def.computed&&(DSUtils.forOwn(def.computed,function(a,b){DSUtils.isFunction(a)&&(def.computed[b]=[a],a=def.computed[b]),def.methods&&b in def.methods&&console.warn(errorPrefix+'Computed property "'+b+'" conflicts with previously defined prototype method!');var c;if(1===a.length){var d=a[0].toString().match(/function.*?\(([\s\S]*?)\)/);c=d[1].split(","),def.computed[b]=c.concat(a),a=def.computed[b],c.length&&console.warn(errorPrefix+"Use the computed property array syntax for compatibility with minified code!")}c=a.slice(0,a.length-1),DSUtils.forEach(c,function(a,b){c[b]=a.trim()}),a.deps=DSUtils.filter(c,function(a){return!!a})}),def[def.class].prototype.DSCompute=function(){return DS.compute(def.name,this)}),DS.store[def.name]={collection:[],completedQueries:{},pendingQueries:{},index:{},modified:{},saved:{},previousAttributes:{},observers:{},changeHistories:{},changeHistory:[],collectionModified:0},DSUtils.forEach(methodsToProxy,function(a){def[a]=function(){var b=Array.prototype.slice.call(arguments);return b.unshift(def.name),DS[a].apply(DS,b)}}),def.beforeValidate=DSUtils.promisify(def.beforeValidate),def.validate=DSUtils.promisify(def.validate),def.afterValidate=DSUtils.promisify(def.afterValidate),def.beforeCreate=DSUtils.promisify(def.beforeCreate),def.afterCreate=DSUtils.promisify(def.afterCreate),def.beforeUpdate=DSUtils.promisify(def.beforeUpdate),def.afterUpdate=DSUtils.promisify(def.afterUpdate),def.beforeDestroy=DSUtils.promisify(def.beforeDestroy),def.afterDestroy=DSUtils.promisify(def.afterDestroy),DSUtils.Events(def),def}catch(err){throw console.error(err),delete definitions[definition.name],delete DS.store[definition.name],err}}var errorPrefix="DS.defineResource(definition): ",methodsToProxy=["changes","changeHistory","create","createInstance","destroy","destroyAll","eject","ejectAll","filter","find","findAll","get","hasChanges","inject","lastModified","lastSaved","link","linkAll","linkInverse","loadRelations","previous","refresh","save","update","updateAll"];module.exports=defineResource},{}],95:[function(a,b){function c(){d.Platform.performMicrotaskCheckpoint()}var d=a("../../../lib/observe-js/observe-js");b.exports=c},{"../../../lib/observe-js/observe-js":1}],96:[function(a,b){function c(a,b){return"DS.eject("+a+", "+b+"): "}function d(a,b,c){for(var d,e=this,f=!1,g=0;g<b.collection.length;g++)if(b.collection[g][a.idAttribute]==c){d=b.collection[g],f=!0;break}return f?(e.unlinkInverse(a.name,c),b.collection.splice(g,1),b.observers[c].close(),delete b.observers[c],delete b.index[c],delete b.previousAttributes[c],delete b.completedQueries[c],delete b.pendingQueries[c],e.utils.forEach(b.changeHistories[c],function(a){e.utils.remove(b.changeHistory,a)}),delete b.changeHistories[c],delete b.modified[c],delete b.saved[c],b.collectionModified=e.utils.updateTimestamp(b.collectionModified),e.notify(a,"eject",d),d):void 0}function e(a,b){var e=this,f=e.utils,g=e.errors,h=e.definitions[a];if(!h)throw new g.NER(c(a,b)+a);if(!f.isString(b)&&!f.isNumber(b))throw new g.IA(c(a,b)+"id: Must be a string or a number!");return d.call(e,h,e.store[a],b)}b.exports=e},{}],97:[function(a,b){function c(a){return"DS.ejectAll("+a+"[, params]): "}function d(a,b,c){var d=this,e=d.utils.toJson(c),f=d.filter(a.name,c),g=d.utils.toLookup(f,a.idAttribute);return d.utils.forOwn(g,function(b,c){d.eject(a.name,c)}),delete b.completedQueries[e],b.collectionModified=d.utils.updateTimestamp(b.collectionModified),d.notify(a,"eject",f),f}function e(a,b){var e=this,f=e.utils,g=e.errors,h=e.definitions[a];if(b=b||{},!h)throw new g.NER(c(a)+a);if(!f.isObject(b))throw new g.IA(c(a)+"params: Must be an object!");var i=e.store[a];return f.isEmpty(b)&&(i.completedQueries={}),d.call(e,h,i,b)}b.exports=e},{}],98:[function(a,b){function c(a){return"DS.filter("+a+"[, params][, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.errors,h=e.definitions[a];if(d=d||{},!h)throw new g.NER(c(a)+a);if(b&&!f.isObject(b))throw new g.IA(c(a)+"params: Must be an object!");if(!f.isObject(d))throw new g.IA(c(a)+"options: Must be an object!");var i=e.store[a];b=b||{},d.allowSimpleWhere="allowSimpleWhere"in d?!!d.allowSimpleWhere:!0;var j=f.toJson(b);return j in i.completedQueries||!d.loadFromServer||i.pendingQueries[j]||e.findAll(a,b,d),h.defaultFilter.call(e,i.collection,a,b,d)}b.exports=d},{}],99:[function(a,b){function c(a,b){return"DS.get("+a+", "+b+"): "}function d(a,b,d){var e=this,f=e.utils,g=e.errors;if(d=d||{},!e.definitions[a])throw new g.NER(c(a,b)+a);if(!f.isString(b)&&!f.isNumber(b))throw new g.IA(c(a,b)+"id: Must be a string or a number!");if(!f.isObject(d))throw new g.IA(c(a,b)+"options: Must be an object!");var h=e.store[a].index[b];return!h&&d.loadFromServer&&e.find(a,b,d).then(null,function(a){return a}),h}b.exports=d},{}],100:[function(a,b){function c(a,b){return"DS.hasChanges("+a+", "+b+"): "}function d(a,b){return!(a.isEmpty(b.added)&&a.isEmpty(b.removed)&&a.isEmpty(b.changed))}function e(a,b){var e=this,f=e.utils,g=e.errors;if(!e.definitions[a])throw new g.NER(c(a,b)+a);if(!f.isString(b)&&!f.isNumber(b))throw new g.IA(c(a,b)+"id: Must be a string or a number!");return e.get(a,b)?d(f,e.changes(a,b)):!1}b.exports=e},{}],101:[function(a,b){b.exports={changes:a("./changes"),changeHistory:a("./changeHistory"),compute:a("./compute").compute,createInstance:a("./createInstance"),defineResource:a("./defineResource"),digest:a("./digest"),eject:a("./eject"),ejectAll:a("./ejectAll"),filter:a("./filter"),get:a("./get"),hasChanges:a("./hasChanges"),inject:a("./inject"),lastModified:a("./lastModified"),lastSaved:a("./lastSaved"),link:a("./link"),linkAll:a("./linkAll"),linkInverse:a("./linkInverse"),previous:a("./previous"),unlinkInverse:a("./unlinkInverse")}},{"./changeHistory":90,"./changes":91,"./compute":92,"./createInstance":93,"./defineResource":94,"./digest":95,"./eject":96,"./ejectAll":97,"./filter":98,"./get":99,"./hasChanges":100,"./inject":102,"./lastModified":103,"./lastSaved":104,"./link":105,"./linkAll":106,"./linkInverse":107,"./previous":108,"./unlinkInverse":109}],102:[function(a,b){function c(a){return"DS.inject("+a+", attrs[, options]): "}function d(a,b,e,f){function i(c,d,e,f,g){var i,j=this,l=f&&f(a.idAttribute)?f(a.idAttribute):j[a.idAttribute];if(k.utils.forEach(a.relationFields,function(a){delete c[a],delete d[a],delete e[a]}),(!k.utils.isEmpty(c)||!k.utils.isEmpty(d)||!k.utils.isEmpty(e)||g)&&(i=k.get(a.name,l),b.modified[l]=k.utils.updateTimestamp(b.modified[l]),b.collectionModified=k.utils.updateTimestamp(b.collectionModified),a.keepChangeHistory)){var m={resourceName:a.name,target:i,added:c,removed:d,changed:e,timestamp:b.modified[l]};b.changeHistories[l].push(m),b.changeHistory.push(m)}a.computed&&(i=i||k.get(a.name,l),k.utils.forOwn(a.computed,function(a,b){var f=!1;k.utils.forEach(a.deps,function(a){(a in c||a in d||a in e||!(b in i))&&(f=!0)}),f=f||!a.deps.length,f&&h.call(i,a,b,k.utils)})),a.relations&&(i=i||k.get(a.name,l),k.utils.forEach(a.relationList,function(b){i[b.localField]&&(b.localKey in c||b.localKey in d||b.localKey in e)&&k.link(a.name,i[a.idAttribute],[b.relation])})),a.idAttribute in e&&console.error("Doh! You just changed the primary key of an object! I don't know how to handle this yet, so your data for the \""+a.name+'" resource is now in an undefined (probably broken) state.')}var j,k=this;if(k.utils.isArray(e)){j=[];for(var l=0;l<e.length;l++)j.push(d.call(k,a,b,e[l],f))}else{var m=a.computed,n=a.idAttribute;if(m&&m[n]){var o=[];k.utils.forEach(m[n].deps,function(a){o.push(e[a])}),e[n]=m[n][m[n].length-1].apply(e,o)}if(!(n in e)){var p=new k.errors.R(c(a.name)+"attrs: Must contain the property specified by `idAttribute`!");throw console.error(p),p}try{a.beforeInject(a.name,e);var q=e[n],r=k.get(a.name,q);r?(k.utils.deepMixIn(r,e),a.resetHistoryOnInject&&(b.previousAttributes[q]={},k.utils.deepMixIn(b.previousAttributes[q],e),b.changeHistories[q].length&&(k.utils.forEach(b.changeHistories[q],function(a){k.utils.remove(b.changeHistory,a)}),b.changeHistories[q].splice(0,b.changeHistories[q].length))),b.observers[q].deliver()):(r=f.useClass?e instanceof a[a.class]?e:new a[a.class]:{},b.previousAttributes[q]={},k.utils.deepMixIn(r,e),k.utils.deepMixIn(b.previousAttributes[q],e),b.collection.push(r),b.changeHistories[q]=[],b.observers[q]=new g.ObjectObserver(r),b.observers[q].open(i,r),b.index[q]=r,i.call(r,{},{},{},null,!0)),b.saved[q]=k.utils.updateTimestamp(b.saved[q]),a.afterInject(a.name,r),j=r}catch(s){console.error(s),console.error("inject failed!",a.name,e)}}return j}function e(a,b,d){function e(b,e,g){var h=f.definitions[e];if(h&&g[b.localField]&&!j.injectedSoFar[e+g[b.localField][h.idAttribute]])try{j.injectedSoFar[e+g[b.localField][h.idAttribute]]=1,g[b.localField]=f.inject(e,g[b.localField],d)}catch(i){f.console.error(c(a.name)+"Failed to inject "+b.type+' relation: "'+e+'"!',i)}else d.findBelongsTo&&"belongsTo"===b.type?f.utils.isArray(g)?f.utils.forEach(g,function(b){f.link(a.name,b[a.idAttribute],[e])}):f.link(a.name,g[a.idAttribute],[e]):(d.findHasMany&&"hasMany"===b.type||d.findHasOne&&"hasOne"===b.type)&&(f.utils.isArray(g)?f.utils.forEach(g,function(b){f.link(a.name,b[a.idAttribute],[e])}):f.link(a.name,g[a.idAttribute],[e]))}var f=this;f.utils.forEach(a.relationList,function(a){f.utils.isArray(b)?f.utils.forEach(b,function(b){e(a,a.relation,b)}):e(a,a.relation,b)})}function f(a,b,f){var g=this,h=g.utils,k=g.errors,l=g.definitions[a];if(f=f||{},!l)throw new k.NER(c(a)+a);if(!h.isObject(b)&&!h.isArray(b))throw new k.IA(c(a)+"attrs: Must be an object or an array!");if(!h.isObject(f))throw new k.IA(c(a)+"options: Must be an object!");var m,n=g.store[a];i++;try{"useClass"in f||(f.useClass=l.useClass),m=d.call(g,l,n,b,f),l.relations&&e.call(g,l,m,f),f.linkInverse&&(h.isArray(m)&&m.length?g.linkInverse(l.name,m[0][l.idAttribute]):g.linkInverse(l.name,m[l.idAttribute])),g.notify(l,"inject",m),i--}catch(o){throw i--,o}return i||(j.injectedSoFar={}),m}var g=a("../../../lib/observe-js/observe-js"),h=a("./compute")._compute,i=0,j={injectedSoFar:{}};b.exports=f},{"../../../lib/observe-js/observe-js":1,"./compute":92}],103:[function(a,b){function c(a,b){return"DS.lastModified("+a+"[, "+b+"]): "}function d(a,b){var d=this,e=d.utils,f=d.errors,g=d.store[a];if(!d.definitions[a])throw new f.NER(c(a,b)+a);if(b&&!e.isString(b)&&!e.isNumber(b))throw new f.IA(c(a,b)+"id: Must be a string or a number!");return b?(b in g.modified||(g.modified[b]=0),g.modified[b]):g.collectionModified}b.exports=d},{}],104:[function(a,b){function c(a,b){return"DS.lastSaved("+a+"[, "+b+"]): "}function d(a,b){var d=this,e=d.utils,f=d.errors,g=d.store[a];if(!d.definitions[a])throw new f.NER(c(a,b)+a);if(!e.isString(b)&&!e.isNumber(b))throw new f.IA(c(a,b)+"id: Must be a string or a number!");return b in g.saved||(g.saved[b]=0),g.saved[b]}b.exports=d},{}],105:[function(a,b){function c(a){return"DS.link("+a+", id[, relations]): "}function d(a,b,c){var d=this;d.utils.forEach(a.relationList,function(e){var f=e.relation;if(!c.length||d.utils.contains(c,f)){var g={};
if("belongsTo"===e.type){var h=b[e.localKey]?d.get(f,b[e.localKey]):null;h&&(b[e.localField]=h)}else if("hasMany"===e.type)g[e.foreignKey]=b[a.idAttribute],b[e.localField]=d.defaults.constructor.prototype.defaultFilter.call(d,d.store[f].collection,f,g,{allowSimpleWhere:!0});else if("hasOne"===e.type){g[e.foreignKey]=b[a.idAttribute];var i=d.defaults.constructor.prototype.defaultFilter.call(d,d.store[f].collection,f,g,{allowSimpleWhere:!0});i.length&&(b[e.localField]=i[0])}}})}function e(a,b,e){var f=this,g=f.utils,h=f.errors,i=f.definitions[a];if(e=e||[],!i)throw new h.NER(c(a)+a);if(!g.isString(b)&&!g.isNumber(b))throw new h.IA(c(a)+"id: Must be a string or a number!");if(!g.isArray(e))throw new h.IA(c(a)+"relations: Must be an array!");var j=f.get(a,b);return j&&d.call(f,i,j,e),j}b.exports=e},{}],106:[function(a,b){function c(a){return"DS.linkAll("+a+"[, params][, relations]): "}function d(a,b,c){var d=this;d.utils.forEach(a.relationList,function(e){var f=e.relation;(!c.length||d.utils.contains(c,f))&&("belongsTo"===e.type?d.utils.forEach(b,function(a){var b=a[e.localKey]?d.get(f,a[e.localKey]):null;b&&(a[e.localField]=b)}):"hasMany"===e.type?d.utils.forEach(b,function(b){var c={};c[e.foreignKey]=b[a.idAttribute],b[e.localField]=d.defaults.constructor.prototype.defaultFilter.call(d,d.store[f].collection,f,c,{allowSimpleWhere:!0})}):"hasOne"===e.type&&d.utils.forEach(b,function(b){var c={};c[e.foreignKey]=b[a.idAttribute];var g=d.defaults.constructor.prototype.defaultFilter.call(d,d.store[f].collection,f,c,{allowSimpleWhere:!0});g.length&&(b[e.localField]=g[0])}))})}function e(a,b,e){var f=this,g=f.utils,h=f.errors,i=f.definitions[a];if(e=e||[],!i)throw new h.NER(c(a)+a);if(b&&!g.isObject(b))throw new h.IA(c(a)+"params: Must be an object!");if(!g.isArray(e))throw new h.IA(c(a)+"relations: Must be an array!");var j=f.filter(a,b);return j&&d.call(f,i,j,e),j}b.exports=e},{}],107:[function(a,b){function c(a){return"DS.linkInverse("+a+", id[, relations]): "}function d(a,b){var c=this;c.utils.forOwn(c.definitions,function(d){c.utils.forOwn(d.relations,function(e){c.utils.forOwn(e,function(e,f){(!b.length||c.utils.contains(b,d.name))&&a.name===f&&c.linkAll(d.name,{},[a.name])})})})}function e(a,b,e){var f=this,g=f.utils,h=f.errors,i=f.definitions[a];if(e=e||[],!i)throw new h.NER(c(a)+a);if(!g.isString(b)&&!g.isNumber(b))throw new h.IA(c(a)+"id: Must be a string or a number!");if(!g.isArray(e))throw new h.IA(c(a)+"relations: Must be an array!");var j=f.get(a,b);return j&&d.call(f,i,e),j}b.exports=e},{}],108:[function(a,b){function c(a,b){return"DS.previous("+a+"[, "+b+"]): "}function d(a,b){var d=this,e=d.utils,f=d.errors,g=d.store[a];if(!d.definitions[a])throw new f.NER(c(a,b)+a);if(!e.isString(b)&&!e.isNumber(b))throw new f.IA(c(a,b)+"id: Must be a string or a number!");return g.previousAttributes[b]?e.merge({},g.previousAttributes[b]):void 0}b.exports=d},{}],109:[function(a,b){function c(a){return"DS.unlinkInverse("+a+", id[, relations]): "}function d(a,b){var c=this;c.utils.forOwn(c.definitions,function(d){c.utils.forOwn(d.relations,function(d){c.utils.forOwn(d,function(d,e){a.name===e&&c.utils.forEach(d,function(a){c.utils.forEach(c.store[a.name].collection,function(d){if("hasMany"===a.type&&d[a.localField]){var e;c.utils.forEach(d[a.localField],function(a,c){a===b&&(e=c)}),d[a.localField].splice(e,1)}else d[a.localField]===b&&delete d[a.localField]})})})})})}function e(a,b,e){var f=this,g=f.utils,h=f.errors,i=f.definitions[a];if(e=e||[],!i)throw new h.NER(c(a)+a);if(!g.isString(b)&&!g.isNumber(b))throw new h.IA(c(a)+"id: Must be a string or a number!");if(!g.isArray(e))throw new h.IA(c(a)+"relations: Must be an array!");var j=f.get(a,b);return j&&d.call(f,i,j,e),j}b.exports=e},{}],110:[function(a,b){function c(a){Error.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.message=a||"Illegal Argument!"}function d(a){Error.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.message=a||"RuntimeError Error!"}function e(a){Error.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.message=(a||"")+" is not a registered resource!"}c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,b.exports={IllegalArgumentError:c,IA:c,RuntimeError:d,R:d,NonexistentResourceError:e,NER:e}},{}],111:[function(a,b){b.exports={DS:a("./datastore"),DSHttpAdapter:a("./adapters/http"),DSLocalStorageAdapter:a("./adapters/localStorage"),DSUtils:a("./utils"),DSErrors:a("./errors")}},{"./adapters/http":76,"./adapters/localStorage":77,"./datastore":89,"./errors":110,"./utils":112}],112:[function(a,b){function c(a){var b={};a=a||this,a.on=function(a,c,d){b[a]=b[a]||[],b[a].push({f:c,c:d})},a.off=function(a,c){var d=b[a];if(d)if(c){for(var e=0;e<d.length;e++)if(d[e]===c){d.splice(e,1);break}}else d.splice(0,d.length);else b={}},a.emit=function(){var a=Array.prototype.slice.call(arguments),c=b[a.shift()]||[];if(c)for(var d=0;d<c.length;d++)c[d].f.apply(c[d].c,a)}}b.exports={isBoolean:a("mout/lang/isBoolean"),isString:a("mout/lang/isString"),isArray:a("mout/lang/isArray"),isObject:a("mout/lang/isObject"),isNumber:a("mout/lang/isNumber"),isFunction:a("mout/lang/isFunction"),isEmpty:a("mout/lang/isEmpty"),toJson:JSON.stringify,fromJson:JSON.parse,makePath:a("mout/string/makePath"),upperCase:a("mout/string/upperCase"),pascalCase:a("mout/string/pascalCase"),deepMixIn:a("mout/object/deepMixIn"),forOwn:a("mout/object/forOwn"),forEach:a("mout/array/forEach"),pick:a("mout/object/pick"),set:a("mout/object/set"),merge:a("mout/object/merge"),contains:a("mout/array/contains"),filter:a("mout/array/filter"),toLookup:a("mout/array/toLookup"),remove:a("mout/array/remove"),slice:a("mout/array/slice"),sort:a("mout/array/sort"),updateTimestamp:function(a){var b="function"==typeof Date.now?Date.now():(new Date).getTime();return a&&a>=b?a+1:b},Promise:a("es6-promise").Promise,http:a("axios"),deepFreeze:function d(a){if("function"==typeof Object.freeze){var b,c;Object.freeze(a);for(c in a)b=a[c],a.hasOwnProperty(c)&&"object"==typeof b&&!Object.isFrozen(b)&&d(b)}},diffObjectFromOldObject:function(a,b){var c={},d={},e={};for(var f in b){var g=a[f];(void 0===g||g!==b[f])&&(f in a?g!==b[f]&&(e[f]=g):d[f]=void 0)}for(var h in a)h in b||(c[h]=a[h]);return{added:c,removed:d,changed:e}},promisify:function(a,b){var c=this.Promise;if(a){if("function"!=typeof a)throw new Error("Can only promisify functions!");return function(){var d=Array.prototype.slice.apply(arguments);return new c(function(c,e){d.push(function(a,b){a?e(a):c(b)});try{a.apply(b||this,d)}catch(f){e(f)}})}}},Events:c}},{axios:2,"es6-promise":23,"mout/array/contains":34,"mout/array/filter":35,"mout/array/forEach":36,"mout/array/remove":39,"mout/array/slice":40,"mout/array/sort":41,"mout/array/toLookup":42,"mout/lang/isArray":48,"mout/lang/isBoolean":49,"mout/lang/isEmpty":50,"mout/lang/isFunction":51,"mout/lang/isNumber":53,"mout/lang/isObject":54,"mout/lang/isString":56,"mout/object/deepMixIn":60,"mout/object/forOwn":62,"mout/object/merge":64,"mout/object/pick":67,"mout/object/set":68,"mout/string/makePath":71,"mout/string/pascalCase":72,"mout/string/upperCase":75}]},{},[111])(111)});